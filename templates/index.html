<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Betting Strategy Performance Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
</head>
<body class="bg-gray-100 font-sans">

    <nav class="bg-blue-600 text-white shadow-md py-4 px-6">
        <div class="container mx-auto">
            <span class="text-2xl font-bold"><i class="fas fa-chart-line mr-3"></i>Betting Performance Dashboard</span>
        </div>
    </nav>

    <div class="container mx-auto mt-8 p-4">

        <div id="loadingSpinner" class="text-center py-10" style="display: none;">
            <div class="animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-blue-500 mx-auto"></div>
            <p class="text-gray-600 mt-4">Fetching data...</p>
        </div>

        <div id="dashboardContent" style="display: none;">
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-md p-6 h-full flex flex-col justify-center items-center transform transition-transform hover:scale-105">
                    <h5 class="text-gray-500 font-semibold text-lg">Total Bets</h5>
                    <p class="text-4xl font-bold text-gray-800 mt-2" id="total-bets">-</p>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6 h-full flex flex-col justify-center items-center transform transition-transform hover:scale-105">
                    <h5 class="text-gray-500 font-semibold text-lg">Win Rate</h5>
                    <p class="text-4xl font-bold text-green-500 mt-2" id="win-rate">-</p>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6 h-full flex flex-col justify-center items-center transform transition-transform hover:scale-105">
                    <h5 class="text-gray-500 font-semibold text-lg">Total Profit (Units)</h5>
                    <p class="text-4xl font-bold text-gray-800 mt-2" id="net-profit">-</p>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6 h-full flex flex-col justify-center items-center transform transition-transform hover:scale-105">
                    <h5 class="text-gray-500 font-semibold text-lg">ROI</h5>
                    <p class="text-4xl font-bold text-gray-800 mt-2" id="roi">-</p>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-md p-6 mb-8">
                <h5 class="text-xl font-semibold text-gray-800 mb-4">Filter Bet History</h5>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div>
                        <label for="startDate" class="block text-sm font-medium text-gray-700">Start Date</label>
                        <input type="date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50" id="startDate">
                    </div>
                    <div>
                        <label for="endDate" class="block text-sm font-medium text-gray-700">End Date</label>
                        <input type="date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50" id="endDate">
                    </div>
                    <div>
                        <label for="leagueName" class="block text-sm font-medium text-gray-700">League</label>
                        <input type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50" id="leagueName" placeholder="e.g., Premier League">
                    </div>
                    <div class="self-end">
                        <button class="w-full flex items-center justify-center px-4 py-2 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" id="filterButton">
                            <i class="fas fa-filter mr-2"></i>Apply Filters
                        </button>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-md p-6 col-span-full">
                    <h5 class="text-xl font-semibold text-gray-800 mb-4">Cumulative Profit Trend</h5>
                    <div class="h-80"><canvas id="dailyProfitTrendChart"></canvas></div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h5 class="text-xl font-semibold text-gray-800 mb-4">Win Rate by Initial Score</h5>
                    <div class="h-72"><canvas id="outcomeByScoreChart"></canvas></div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h5 class="text-xl font-semibold text-gray-800 mb-4">Win Rate by Day of Week</h5>
                    <div class="h-72"><canvas id="performanceByDayChart"></canvas></div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h5 class="text-xl font-semibold text-gray-800 mb-4">Win Rate by Country</h5>
                    <div class="h-72"><canvas id="performanceByCountryChart"></canvas></div>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6">
                    <h5 class="text-xl font-semibold text-gray-800 mb-4">Win Rate by Bet Type</h5>
                    <div class="h-72"><canvas id="performanceByBetTypeChart"></canvas></div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-md p-6 mb-8">
                <h5 class="text-xl font-semibold text-gray-800 mb-4">Recent Bets Log</h5>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Match</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">League</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Country</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Bet Type</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Outcome</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Placed At</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200" id="recentBetsTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>
